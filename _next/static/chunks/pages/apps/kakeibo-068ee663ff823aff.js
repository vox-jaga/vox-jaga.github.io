(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[457],{3941:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/apps/kakeibo",function(){return n(6259)}])},4176:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var r=n(4848),s=n(3368),o=n.n(s),a=n(6540),i=n(8133),l=n.n(i);function c(){return(0,a.useEffect)(()=>{function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-1G1JKP1REN")}),(0,r.jsx)(l(),{async:!0,src:"https://www.googletagmanager.com/gtag/js?id=G-1G1JKP1REN"})}function d(e){let{title:t="Nemunemu Blog"}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o(),{children:(0,r.jsx)("title",{children:t+" | NemuNemu"})}),(0,r.jsx)(c,{})]})}},3803:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var r=n(4848),s=n(1106),o=n.n(s),a=n(39),i=n(6424),l=n(4122),c=n.n(l);function d(){return(0,r.jsx)(a.A,{"aria-label":"breadcrumb",className:c().footer,sx:{mt:2},children:function(e){let t=e.split("/"),n=[],s="";for(let e=0;e<t.length-1;e++)s+=t[e]+"/",n[e]=(0,r.jsx)(o(),{underline:"hover",color:"inherit",href:s,children:0==e?"Home":t[e]},e);return n}((0,i.usePathname)())})}},45:(e,t,n)=>{"use strict";n.d(t,{n:()=>o});var r=n(2907),s=n(4429);function o(){let e=(0,r.A)();return!(0,s.A)(e.breakpoints.up("sm"))}},9881:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(4848),s=n(429);n(1943);var o=n(6247),a=n(4191),i=n(9713),l=n(4551),c=n(2064),d=n(45);function u(){(0,d.n)();{let e=(0,r.jsx)(a.A,{orientation:"vertical",variant:"middle",sx:{borderWidth:1,borderColor:"white"},flexItem:!0}),t={mx:2,fontSize:{xs:"1.2rem",sm:"1.4rem"}};return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(i.A,{position:"relative",elevation:0,sx:{maxWidth:{xs:1,sm:"48rem"},mx:"auto"},children:[(0,r.jsx)(l.A,{disableGutters:!0,sx:{background:"white",pl:2},children:(0,r.jsx)(o.A,{sx:{fontSize:{xs:32,sm:96},color:"black"},children:"JAGA's Lab."})}),(0,r.jsxs)(c.A,{sx:{display:"flex",color:"white"},children:[(0,r.jsx)(s.A,{href:"/",underline:"hover",color:"inherit",children:(0,r.jsx)(o.A,{sx:{...t},children:"Home"})}),e,(0,r.jsx)(s.A,{href:"/posts",underline:"hover",color:"inherit",children:(0,r.jsx)(o.A,{sx:{...t},children:"Blog"})}),e,(0,r.jsx)(s.A,{href:"/apps",underline:"hover",color:"inherit",children:(0,r.jsx)(o.A,{sx:{...t},children:"Apps"})}),e,(0,r.jsx)(s.A,{href:"/privacy-policy/website",underline:"hover",color:"inherit",children:(0,r.jsx)(o.A,{sx:{...t},children:"Policy"})})]})]})})}}},8232:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(4848),s=n(1943),o=n.n(s);function a(e){let{children:t}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:o().container,children:t})})}n(6540)},6259:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>C});var r=n(4848),s=n(8232),o=n(9881),a=n(3803),i=n(4176),l=n(5451),c=n(1917),d=n(1705),u=n(6247),h=n(3384),m=n(2064),x=n(601),p=n(5737),f=n(8459),j=n(1617),A=n(2866),y=n(6540),_=n(5738),b=n(1501),g=n(1395),w=n(2689),v=n(503),S=n(4353),k=n.n(S);function C(){let[e,t]=(0,y.useState)([]),[n,S]=(0,y.useState)(Array(40).fill({})),[C,E]=(0,y.useState)(null),[N,P]=(0,y.useState)(k()().$M),[M,F]=(0,y.useState)([]),[$,z]=(0,y.useState)([]),[I,R]=(0,y.useState)(k()()),[L,O]=(0,y.useState)([]),[D,G]=(0,y.useState)("");async function T(){let e=new FormData(document.getElementById("test-form"));await fetch("https://2021072723412010135277.onamaeweb.jp/api/kakeibo/add.php",{method:"POST",mode:"cors",credentials:"include",body:e}),W()}async function W(){let e=await fetch("https://2021072723412010135277.onamaeweb.jp/api/kakeibo/get.php",{method:"POST",mode:"cors",credentials:"include"}),n=(e=JSON.parse(await e.text())).notes,r=new Set;n.map(e=>{e.id=parseInt(e.id),e.amount=parseInt(e.amount),e.money_source||(e.money_source="不明な財源"),r.add(e.money_source)}),z(r=Array.from(r).toReversed()),E(e.user),t(n.toReversed()),H(n,N,r)}async function B(){let e=new FormData;e.append("selected-rows",L.join(","));let t=await fetch("https://2021072723412010135277.onamaeweb.jp/api/kakeibo/delete.php",{method:"POST",mode:"cors",credentials:"include",body:e});t=await t.text(),W()}function H(e,t,r){let s=Array(n.length),o=s.length;for(let e=0;e<o;e++)s[e]={},r.forEach(t=>{s[e][t]=0});let a=new Set;e.forEach(e=>{let n=k()(e.date);""!=e.category&&a.add(e.category),n.$M==t&&(s[n.$D][e.money_source]+=e.amount)}),F(Array.from(a).toReversed()),S(s)}return(0,y.useEffect)(()=>{console.log("useEffect");let e=document.cookie.split(";"),t=!1;e.forEach(e=>{t|=e.includes("nemu_logged_in=")});let n=document.getElementById("login-form");t&&n&&(n.outerHTML=""),W()},[]),console.log("Main"),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.A,{title:"家計簿アプリ"}),(0,r.jsx)(o.A,{}),(0,r.jsxs)(s.A,{children:[(0,r.jsxs)("form",{id:"login-form",method:"POST",action:"https://2021072723412010135277.onamaeweb.jp/api/kakeibo/auth.php",children:[(0,r.jsxs)(h.A,{spacing:2,sx:{maxWidth:"12em",mb:2},children:[(0,r.jsx)(l.A,{name:"user",type:"text",label:"ユーザー名",variant:"standard"}),(0,r.jsx)(l.A,{name:"pass",type:"password",label:"パスワード",variant:"standard"})]}),(0,r.jsx)(c.A,{variant:"outlined",type:"submit",children:"ログイン"})]}),(0,r.jsxs)(v.A,{container:!0,spacing:2,children:[(0,r.jsx)(v.A,{size:{xs:12,sm:4},children:(0,r.jsxs)("form",{id:"test-form",children:[(0,r.jsxs)(h.A,{spacing:2,sx:{maxWidth:"12em",mb:2},children:[(0,r.jsx)(l.A,{name:"amount",id:"amount-input",type:"number",label:"金額",variant:"standard"}),(0,r.jsx)(d.A,{disablePortal:!0,freeSolo:!0,options:$,renderInput:e=>(0,r.jsx)(l.A,{name:"money-source",...e,label:"お金の出所"})}),(0,r.jsx)(d.A,{disablePortal:!0,freeSolo:!0,options:M,renderInput:e=>(0,r.jsx)(l.A,{id:"category-input",name:"category",...e,label:"カテゴリー"})}),(0,r.jsx)(p.$,{dateAdapter:x.R,children:(0,r.jsx)(f.l,{value:I,name:"date",label:"日時"})})]}),(0,r.jsx)(c.A,{type:"reset",variant:"outlined",onClick:T,sx:{mb:2},children:"送信"})]})}),(0,r.jsxs)(v.A,{size:{xs:12,sm:6},children:[(0,r.jsxs)(m.A,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(d.A,{sx:{width:"10em",mr:2},disablePortal:!0,freeSolo:!0,options:$,onChange:(e,t)=>G(t),renderInput:e=>(0,r.jsx)(l.A,{name:"money-source",...e,label:"お金の出所"})}),(0,r.jsx)(u.A,{align:"justify",children:"の収支を表示中"})]}),(0,r.jsx)(p.$,{dateAdapter:x.R,children:(0,r.jsx)(j.x,{slots:{day:function(e){let{day:t}=e,s=t.$M==N,o="white";if(n[t.$D][D]>0&&s){let e=n[t.$D][D]/2e3;o="rgb(255, ".concat(255*(1-e),", ").concat(255*(1-e),")")}return(0,r.jsx)("div",{style:{background:o},children:(0,r.jsx)(_.a,{day:t,isFirstVisibleCell:!0,isLastVisibleCell:!1,outsideCurrentMonth:!s,onDaySelect:e=>{R(e)},selected:t.isSame(I,"day")})})}},onMonthChange:t=>{P(t.$M),H(e,t.$M,$)}})})]})]}),(0,r.jsx)(v.A,{container:!0,spacing:2,children:function(){let t=new Set(e.map(e=>e.money_source)),n=[],s={};return e.forEach(e=>{let t=e.money_source;t in s||(s[t]=0),s[t]-=e.amount}),t.forEach(e=>{n.push((0,r.jsx)(v.A,{size:{xs:6,sm:4},children:(0,r.jsxs)(b.A,{children:[(0,r.jsx)(g.A,{sx:{pl:2,pb:1,pt:1,background:"#add6ff"},children:(0,r.jsx)(u.A,{sx:{fontSize:"1.2em"},children:e})}),(0,r.jsx)(w.A,{children:(0,r.jsxs)(u.A,{children:["残金: ",s[e]]})})]})},e))}),n}()}),(0,r.jsx)(u.A,{sx:{my:2},children:C}),(0,r.jsx)(c.A,{variant:"outlined",type:"button",color:"warning",onClick:B,children:"選択したデータを削除"}),(0,r.jsx)(A.z,{id:"table",checkboxSelection:!0,columns:[{field:"money_source"},{field:"amount"},{field:"category"},{field:"date",width:200}],rows:e.filter(e=>!D||e.money_source==D),pageSizeOptions:[5,10,100],sx:{border:0},onRowSelectionModelChange:e=>{O(e)}}),(0,r.jsx)(a.A,{})]})]})}},4122:e=>{e.exports={smallMargin:"custom_smallMargin___KcWW",footer:"custom_footer__oYWe_",niceColor:"custom_niceColor__BBmus",badColor:"custom_badColor__gqQZ8"}},1943:e=>{e.exports={container:"layout_container__FUycR",flexContainer:"layout_flexContainer__SmbaG",workContainer:"layout_workContainer__YHA5_",headerLink:"layout_headerLink__zXVey",header:"layout_header__SFlEE",background:"layout_background__oCFQX"}}},e=>{var t=t=>e(e.s=t);e.O(0,[467,106,958,503,451,442,76,528,636,593,792],()=>t(3941)),_N_E=e.O()}]);